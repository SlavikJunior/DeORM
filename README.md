
# üß© DeORM

–ü—Ä–æ—Å—Ç–∞—è –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è ORM (Object-Relational Mapping) –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è **Kotlin**.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π  
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞–ø–ø–∏–Ω–≥** ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ Kotlin –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ë–î  
- **–ü—Ä–æ—Å—Ç–æ–π API** ‚Äî –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏  
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —Ç–∏–ø–∞–º–∏ Kotlin –≤–º–µ—Å—Ç–æ —Å—ã—Ä—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤  
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL** ‚Äî —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ JDBC-–¥—Ä–∞–π–≤–µ—Ä  
- **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞** ‚Äî —É–¥–æ–±–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

---

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üì¶ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

> –ü–æ–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ –≤ Maven Central, –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å JAR –∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã **Releases** –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤—Ä—É—á–Ω—É—é.

#### Maven

```xml
<dependencies>
    <!-- DeORM -->
    <dependency>
        <groupId>com.slavikjunior</groupId>
        <artifactId>deorm</artifactId>
        <version>1.0.0</version>
        <scope>system</scope>
        <systemPath>${project.basedir}/libs/deorm.jar</systemPath>
    </dependency>

    <!-- PostgreSQL –¥—Ä–∞–π–≤–µ—Ä -->
    <dependency>
        <groupId>org.postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>42.7.4</version>
    </dependency>
</dependencies>
```

#### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª application.properties –≤ src/main/resources/:

database.name=mydb
host=localhost
port=5432
user=postgres
password=7913
###
##### üß± –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
import com.slavikjunior.deorm.annotations.Column
import com.slavikjunior.deorm.annotations.Id
import com.slavikjunior.deorm.annotations.Table
import com.slavikjunior.deorm.orm.Entity
import java.sql.Types

@Table(name = "persons")
data class Person(
    @Id(autogenerated = true)
    @Column(name = "id", type = Types.INTEGER, nullable = false)
    var id: Int,

    @Column(name = "first_name", type = Types.VARCHAR, nullable = false)
    var firstName: String,

    @Column(name = "last_name", type = Types.VARCHAR, nullable = false)
    var lastName: String,

    @Column(name = "phone", type = Types.VARCHAR, nullable = true)
    var phone: String? = null
) : Entity
##
# üß© –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
import com.slavikjunior.deorm.orm.EntityManager

fun main() {
    val person = Person(
        id = 0, // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, autogenerated = true
        firstName = "John",
        lastName = "Doe",
        phone = "+78126665252"
    )

    // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    val isCreated = EntityManager.create(person)
    println("$person is created: $isCreated")

    // –ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–∏
    val found = EntityManager.get(
        Person::class.java,
        mapOf("first_name" to person.firstName, "last_name" to person.lastName)
    )?.last() as Person
    println("$person is found: $found")

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    val isUpdated = EntityManager.update(
        Person::class.java,
        id = found.id,
        columnsToValues = mapOf("first_name" to "Arthur", "last_name" to "Sharafiev")
    )

    if (isUpdated) {
        val updated = EntityManager.get(
            Person::class.java,
            mapOf("first_name" to "Arthur", "last_name" to "Sharafiev")
        )?.last() as Person

        println("$found updated: $updated")

        // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
        val isDeleted = EntityManager.delete(updated)
        println("$updated is deleted: $isDeleted")
    }
}
##
# üñ•Ô∏è –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
Person(id=0, firstName=John, lastName=Doe, phone=+78126665252) is created: true
Person(id=0, firstName=John, lastName=Doe, phone=+78126665252) is found: Person(id=3, firstName=John, lastName=Doe, phone=+78126665252)
Person(id=3, firstName=John, lastName=Doe, phone=+78126665252) is updated: Person(id=3, firstName=Arthur, lastName=Sharafiev, phone=+78126665252)
Person(id=3, firstName=Arthur, lastName=Sharafiev, phone=+78126665252) is deleted: true